<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="基本概念 库概念  * 开源库(eg.AF,SDWeb,能看到.m实现) * 闭源库:1.静态库 (形式:.a/.framework) 2.动态库 (形式:.tbd || .dylib(之前的叫法) /.framework)  制作SDK方法  1. .a静态库制作,Xcode模版,创建Static Library: 最终生成 .h &amp;&amp; .a 两个文件。(eg:sina,wechat) 2.">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS SDK(动态库&#x2F;静态库)">
<meta property="og:url" content="http://yoursite.com/2016/05/18/iOS SDK(动态库:静态库)/index.html">
<meta property="og:site_name" content="Wingci&#39;s Blog">
<meta property="og:description" content="基本概念 库概念  * 开源库(eg.AF,SDWeb,能看到.m实现) * 闭源库:1.静态库 (形式:.a/.framework) 2.动态库 (形式:.tbd || .dylib(之前的叫法) /.framework)  制作SDK方法  1. .a静态库制作,Xcode模版,创建Static Library: 最终生成 .h &amp;&amp; .a 两个文件。(eg:sina,wechat) 2.">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-05-18T08:52:39.721Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOS SDK(动态库&#x2F;静态库)">
<meta name="twitter:description" content="基本概念 库概念  * 开源库(eg.AF,SDWeb,能看到.m实现) * 闭源库:1.静态库 (形式:.a/.framework) 2.动态库 (形式:.tbd || .dylib(之前的叫法) /.framework)  制作SDK方法  1. .a静态库制作,Xcode模版,创建Static Library: 最终生成 .h &amp;&amp; .a 两个文件。(eg:sina,wechat) 2.">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2016/05/18/iOS SDK(动态库:静态库)/"/>





  <title>iOS SDK(动态库/静态库) | Wingci's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Wingci's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">zero</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/05/18/iOS SDK(动态库:静态库)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wingci">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wingci's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">iOS SDK(动态库/静态库)</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-05-18T16:31:15+08:00">
                2016-05-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <hr>
<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><blockquote>
<p>库概念</p>
<pre>
* 开源库(eg.AF,SDWeb,能看到.m实现)
* 闭源库:1.静态库 (形式:.a/.framework) 2.动态库 (形式:.tbd || .dylib(之前的叫法) /.framework) </pre>
制作SDK方法
<pre>
1. .a静态库制作,Xcode模版,创建Static Library: 最终生成 .h && .a 两个文件。(eg:sina,wechat)
2.<strong style="color:    #FF0000;"> .framework静态库制作,最终生成.framework文件,推荐使用。</strong> => (eg:baidu,renren)
3. .workspace的方式,多工程联编。(eg:FaceID)
</pre>
</blockquote>
<blockquote>
<p>优缺点</p>
</blockquote>
<pre>
1.<em>静态库</em>
* 链接时完整地拷贝至可执行文件中，被多次使用就有多份冗余拷贝。提高了代码的复用及核心技术的保密程度。    
* 编译后的执行程序不需要外部的函数库支持，因为所有使用的函数都已经被编译进去了。当然这也会成为他的缺点，因为如果静态函数库改变了，那么你的程序必须重新编译。
2.<em>动态库</em>
* 可以将最终可执行文件体积缩小.
* 程序运行时由系统动态加载到内存，节省内存。
* 动态函数库的改变并不影响你的程序，所以动态函数库的升级比较方便。
</pre>

<blockquote>
<p>区别</p>
</blockquote>
<pre>
* 静态库:链接时会被完整的复制到可执行文件中，被多次使用就有多份拷贝
* 动态库:链接时不复制，程序运行时由系统动态加载到内存，系统只加载一次，多个程序共用（如系统的UIKit.framework等），节省内存。
</pre>

<blockquote>
<p>总结<pre></pre></p>
<ul>
<li>静态库和动态库是相对编译期和运行期的</li>
<li>静态库在程序编译时会被链接到目标代码中，程序运行时将不再需要改静态库；</li>
<li>动态库在程序编译时并不会被链接到目标代码中，只是在程序运行时才被载入，因为在程序运行期间还需要动态库的存在。<br></li>
</ul>
</blockquote>
<h2 id="iOS8之后的变动"><a href="#iOS8之后的变动" class="headerlink" title="iOS8之后的变动"></a>iOS8之后的变动</h2><ul>
<li>iOS8 之前，苹果不允许第三方框架使用动态方式加载。</li>
<li>iOS8 开始允许开发者有条件地创建和使用动态框架(Building-&gt;Linking-&gt;Mach-O-&gt;Static Library)，这种框架叫做 Cocoa Touch Framework</li>
<li>App 中使用 Cocoa Touch Framework 制作的动态库 在打包和提交 app 时会被放到 app  main bundle 的根目录 中，运行在沙盒里，而不是系统中</li>
<li>如今市面上可见的SDK基本上已经是 .framework静态库（伪动态库）</li>
</ul>
<p>##SDK制作过程，常用Unix命令</p>
<ul>
<li><p>lipo -create 路径1 路径2 -output 路径3</p>
<p>用于合并不同环境下的.a文件</p>
</li>
<li><p>lipo -info xxx.a</p>
<p>用于查看.a的编译信息,查看类型 armv7 armv7s arm64 i386 x86_64这几个类型</p>
</li>
<li><p>lipo -remove armv7 xxxsource.a -output  xxxoutput.a</p>
<p>用于移除库支持的架构，比如armv7</p>
</li>
</ul>
<p>##库支持的硬件架构<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">模拟器：</span><br><span class="line">iPhone4s-iPnone5：i386</span><br><span class="line">iPhone5s-iPhone7 Plus：x86_64</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">真机:</span><br><span class="line">iPhone3gs-iPhone4s：armv7</span><br><span class="line">iPhone5-iPhone5c：armv7s</span><br><span class="line">iPhone5s-iPhone7 Plus：arm64</span><br></pre></td></tr></table></figure>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><blockquote>
<p>静态库只能用于真机,不能用于模拟器</p>
</blockquote>
<ul>
<li><p>原因: 没有合并 用Gener iOS/真机和模拟器编译后库的文件.<br>   解决方法:    </p>
<p> (1) 使用命令行合并 lipo-create 路径1(/Relese-iphoneos/xxx.a) 路径2(/Relese-iphonesimulator/xxx.a) -output 目标路径(../xxx.a).</p>
</li>
</ul>
<p>   (2) 在Xcode里面的Build Setting -&gt; Valid Architectures 里面，添加 armv7 armv7s arm64 i386 x86_64这几个类型； Build Setting -&gt; Build Active Architecture Only 选项设置为NO。</p>
<blockquote>
<p>编译报错 <em style="color:    #FF0000;">“unrecognized selector send to instance.”</em></p>
</blockquote>
<ul>
<li>原因:含有Category</li>
<li>解决方法:Bulid Settings -&gt; Other Link Flags -&gt; 添加 -Objc || -all_load || -force-load xxx</li>
</ul>
<blockquote>
<p>添加静态库后,编译报错 <em style="color:    #FF0000;">“有重复定义的符号(duplicate symbol )”</em></p>
</blockquote>
<ul>
<li>原因:静态库中的某些定义和使用者的工程有冲突</li>
<li>解决方法:加上Prefix前缀来做保护(eg.XXXJSONDecoder)</li>
</ul>
<p>##其他问题</p>
<ul>
<li>发布静态库时，注意选项“Release/Debug”,如果修改了静态库，但代码不起作用，一定要清除各种缓存和关联。</li>
</ul>
<p>##源码到APP文件变动</p>
<blockquote>
<p>Xcode Build 后发生了什么</p>
</blockquote>
<ul>
<li>预处理（Pre-process）：把宏替换，删除注释，展开头文件，产生 .i 文件。</li>
<li>编译（Compliling）：把之前的 .i 文件转换成汇编语言，产生 .s文件。</li>
<li>汇编（Asembly）：把汇编语言文件转换为机器码文件，产生 .o 文件。</li>
<li>链接（Link）：对.o文件中的对于其他的库的引用的地方进行引用，生成最后的可执行文件（同时也包括多个 .o 文件进行 link）。</li>
</ul>
<h2 id="具体实现流程"><a href="#具体实现流程" class="headerlink" title="具体实现流程"></a>具体实现流程</h2><blockquote>
<p>.a静态库</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">st=&gt;start: 开始</span><br><span class="line">e=&gt;end: 结束</span><br><span class="line">op1=&gt;operation: 创建工程 选择CocoaTouch Static Library</span><br><span class="line">op2=&gt;operation: 函数定义与实现</span><br><span class="line">op3=&gt;operation: 我们需要把Target-&gt;Build Setting-&gt;Build Phasesuild Active Architecture Only-&gt;Debug/Release修改为NO，否则生成的静态库就只支持当前选择设备的架构。</span><br><span class="line">op4=&gt;operation: 设置Run Scheme为Release</span><br><span class="line">op5=&gt;operation: 合并静态库文件</span><br><span class="line">op6=&gt;operation: 把.a文件和.h文件导入工程,调用头文件即可</span><br><span class="line">st-&gt;op1-&gt;op2-&gt;op3-&gt;op4-&gt;op5-&gt;op6-&gt;e</span><br></pre></td></tr></table></figure>
<p>注意：为了开发方便，我们可以使用生成的通用静态库，但是最终上线的使用我们可以只导入真机的Release的.a文件，这样工程的体积也会小一些。</p>
<blockquote>
<p>.framework静态库</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">st=&gt;start: 开始</span><br><span class="line">e=&gt;end: 结束</span><br><span class="line">op1=&gt;operation: 创建工程 选择CocoaTouch Framework,生成模版,带一个.h头文件,用于导入需要暴露给使用者的头文件</span><br><span class="line">op2=&gt;operation: 函数定义与实现</span><br><span class="line">op3=&gt;operation: 选择添加头文件,import到一开始的头文件中,并将Target-&gt;Build Phases-&gt;Headers中的Project中要暴露的头文件拖拽到Pulic里面</span><br><span class="line">op4=&gt;operation: 修改生成的Mach-O格式(Building-&gt;Linking-&gt;Mach-O-&gt;Static Library)，因为动态库也可以是以framework形式存在，所以需要设置，否则默认打出来的是动态库。将target-&gt;BuildSetting-&gt;Mach-o Type 设为Static Library（默认为Dynamic Library）</span><br><span class="line">op5=&gt;operation: 编译,合并.framework静态库文件</span><br><span class="line">op6=&gt;operation: 把.framework导入工程,调用头文件即可</span><br><span class="line">st-&gt;op1-&gt;op2-&gt;op3-&gt;op4-&gt;op5-&gt;op6-&gt;e</span><br></pre></td></tr></table></figure>
<blockquote>
<p>.framework动态库</p>
</blockquote>
<ul>
<li>实现过程和.framework静态库一样，区别就是Mach-O格式是Dynamic Library，且App Store不给上架</li>
</ul>
<blockquote>
<p>workspace模式(faceid集成模式)</p>
</blockquote>
<ul>
<li>在含有静态库的工程A里,设置控制器，分类等。将A工程拖入目标工程B内，设置B内的Building Phase -&gt; Link Binary with Library-&gt;添加工程A的.a或者.framework，让B的控制器可以继承A的控制器，重写父类的方法，就可以实现Demo的画面或者其他画面。</li>
</ul>
<h2 id="业务场景"><a href="#业务场景" class="headerlink" title="业务场景"></a>业务场景</h2><ul>
<li><em>支付类SDK</em></li>
<li><em>登录类SDK</em></li>
<li><em>人脸识别SDK</em></li>
<li><em>分享类SDK</em></li>
<li><em>地图类SDK</em></li>
<li><em>通讯类SDK</em></li>
<li><em>数据统计类SDK</em></li>
<li><em>消息推送类SDK</em></li>
<li><em>H5活动页类SDK</em></li>
</ul>
<h2 id="支付类SDK头文件参考"><a href="#支付类SDK头文件参考" class="headerlink" title="支付类SDK头文件参考"></a>支付类SDK头文件参考</h2><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;UIKit/UIKit.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">const</span> <span class="built_in">NSString</span>* <span class="keyword">const</span> kMSPaySDKBuildVersion;</span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">const</span> <span class="built_in">NSString</span> *<span class="keyword">const</span> kMSPaySDKVersion;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> MSPayResult&#123;</span><br><span class="line">    kMSPayResultSuccess = <span class="number">0</span>,    <span class="comment">// 支付成功</span></span><br><span class="line">    kMSPayResultFail = <span class="number">1</span>,       <span class="comment">// 支付失败</span></span><br><span class="line">    kMSPayResultCancel = <span class="number">2</span>,     <span class="comment">// 支付取消，用户行为</span></span><br><span class="line">    kMSPayResultInitError,      <span class="comment">// 支付初始化错误，订单信息有误，签名失败等</span></span><br><span class="line">    kMSPayResultInitParamError, <span class="comment">// 支付订单参数有误，无法进行初始化，未传必要信息等</span></span><br><span class="line">    kMSPayResultUnknow,         <span class="comment">// 其他</span></span><br><span class="line">&#125; MSPayResult;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSUInteger</span>,MSPayType) &#123;</span><br><span class="line">    MSPayTypeQuick,     <span class="comment">// 快捷</span></span><br><span class="line">    MSPayTypeVerify,    <span class="comment">// 认证</span></span><br><span class="line">    MSPayTypePreAuth,   <span class="comment">// 预授权====</span></span><br><span class="line">    MSPayTypeTravel,    <span class="comment">// 游易付之随心付</span></span><br><span class="line">    MSPayTypeRealName,  <span class="comment">// 实名快捷支付</span></span><br><span class="line">    MSPayTypeCar,       <span class="comment">// 车易付</span></span><br><span class="line">    MSPayTypeInstalments,<span class="comment">//分期付</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">MSPaySdkDelegate</span>&lt;<span class="title">NSObject</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@required</span></span><br><span class="line"><span class="comment">/* 可能返回的参数含义</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> 参数名                     含义</span></span><br><span class="line"><span class="comment"> result_pay                  支付结果</span></span><br><span class="line"><span class="comment"> oid_partner                 商户编号</span></span><br><span class="line"><span class="comment"> dt_order                    商户订单时间</span></span><br><span class="line"><span class="comment"> no_order                    商户唯一订单号</span></span><br><span class="line"><span class="comment"> ￼oid_paybill                 支付支付单号</span></span><br><span class="line"><span class="comment"> money_order                 交易金额</span></span><br><span class="line"><span class="comment"> ￼￼settle_date                 清算日期</span></span><br><span class="line"><span class="comment"> ￼￼info_order                  订单描述</span></span><br><span class="line"><span class="comment"> pay_type                    支付类型</span></span><br><span class="line"><span class="comment"> bank_code                   银行编号</span></span><br><span class="line"><span class="comment"> bank_name                   银行名称</span></span><br><span class="line"><span class="comment"> memo                        支付备注</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  调用sdk以后的结果回调</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @param resultCode 支付结果</span></span><br><span class="line"><span class="comment"> *  @param dic        回调的字典，参数中，ret_msg会有具体错误显示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)paymentEnd:(MSPayResult)resultCode withResultDic:(<span class="built_in">NSDictionary</span>*)dic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MSPayFakeSDK</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  单例sdk</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @return 返回MSaySdk的单例对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+ (MSPayFakeSDK *)shareSdk;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 代理 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">NSObject</span>&lt;MSPaySdkDelegate&gt; *sdkDelegate;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  支付接口</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @param viewController 推出支付支付界面的ViewController</span></span><br><span class="line"><span class="comment"> *  @param payType        支付类型:MSPayType</span></span><br><span class="line"><span class="comment"> *  @param traderInfo     交易信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)presentMSPaySDKInViewController: (<span class="built_in">UIViewController</span> *)viewController</span><br><span class="line">                            withPayType: (MSPayType)payType</span><br><span class="line">                          andTraderInfo: (<span class="built_in">NSDictionary</span> *)traderInfo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  在sdk标题栏下面设定一个广告条或者操作指南bar</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @param view 要显示的广告View</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+ (<span class="keyword">void</span>)setADView:(<span class="built_in">UIView</span> *)view;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h2 id="人脸识别SDK头文件参考"><a href="#人脸识别SDK头文件参考" class="headerlink" title="人脸识别SDK头文件参考"></a>人脸识别SDK头文件参考</h2><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  liveness.h</span></span><br><span class="line"><span class="comment">//  liveness</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by youmu on 15-1-6.</span></span><br><span class="line"><span class="comment">//  Copyright (c) 2015 Megvii Inc. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  \file LivenessDetector.h</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;UIKit/UIKit.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;MGBaseKit/MGBaseKit.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;AVFoundation/AVFoundation.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"LivenessEnumType.h"</span></span></span><br><span class="line"><span class="meta">#define MG_LANDMARK_POINTS_NUM 7</span></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  人脸属性</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span>  &#123;</span><br><span class="line">    <span class="comment">/** 是否包含人脸 */</span></span><br><span class="line">    <span class="keyword">bool</span> has_face ;</span><br><span class="line">    <span class="comment">/** 左右旋转角度 */</span></span><br><span class="line">    <span class="keyword">float</span> yaw  ;</span><br><span class="line">    <span class="comment">/** 上下旋转角度 */</span></span><br><span class="line">    <span class="keyword">float</span> pitch  ;</span><br><span class="line">    <span class="comment">/** 运动模糊程度 */</span></span><br><span class="line">    <span class="keyword">float</span> blurness_motion  ;</span><br><span class="line">    <span class="comment">/** 高斯模糊程度 */</span></span><br><span class="line">    <span class="keyword">float</span> blurness_gaussian  ;</span><br><span class="line">    <span class="comment">/** 人脸位置 */</span></span><br><span class="line">    <span class="built_in">CGRect</span> face_rect;</span><br><span class="line">    <span class="built_in">CGPoint</span> face_landmarks[MG_LANDMARK_POINTS_NUM];</span><br><span class="line">    <span class="comment">/** 左眼睁闭程度 */</span></span><br><span class="line">    <span class="keyword">float</span> eye_left_hwratio  ;</span><br><span class="line">    <span class="comment">/** 右眼睁闭程度 */</span></span><br><span class="line">    <span class="keyword">float</span> eye_right_hwratio  ;</span><br><span class="line">    <span class="comment">/** 嘴部睁闭程度 */</span></span><br><span class="line">    <span class="keyword">float</span> mouth_hwratio  ;</span><br><span class="line">    <span class="comment">/** 眼镜判定 */</span></span><br><span class="line">    <span class="keyword">float</span> glasses  ;</span><br><span class="line">    <span class="comment">/** 亮度 */</span></span><br><span class="line">    <span class="keyword">float</span> brightness  ;</span><br><span class="line">    <span class="comment">/** 人脸有效面积比 */</span></span><br><span class="line">    <span class="keyword">float</span> integrity  ;</span><br><span class="line">    <span class="comment">/** 当前帧的属性状态 */</span></span><br><span class="line">    MGLivenessFrameType frame_type;</span><br><span class="line">    <span class="comment">/** 连续性检测 */</span></span><br><span class="line">    <span class="keyword">bool</span> not_video;</span><br><span class="line">    <span class="comment">/** 平滑左右旋转角度 */</span></span><br><span class="line">    <span class="keyword">float</span> smooth_yaw  ;</span><br><span class="line">    <span class="comment">/** 平滑上下旋转角度 */</span></span><br><span class="line">    <span class="keyword">float</span> smooth_pitch  ;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">float</span> eye_left_det;</span><br><span class="line">    <span class="keyword">float</span> eye_right_det;</span><br><span class="line">    <span class="keyword">float</span> mouth_det;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 遮挡判断 */</span></span><br><span class="line">    <span class="keyword">float</span> eye_left_occlusion;</span><br><span class="line">    <span class="keyword">float</span> eye_right_occlusion;</span><br><span class="line">    <span class="keyword">float</span> mouth_occlusion;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** 眨眼判断 */</span></span><br><span class="line">    <span class="keyword">bool</span> eye_blink;</span><br><span class="line">    <span class="comment">/** 张嘴判断 */</span></span><br><span class="line">    <span class="keyword">bool</span> mouth_open;</span><br><span class="line">    <span class="comment">/** 是否通过3D验证 */</span></span><br><span class="line">    <span class="keyword">bool</span> pitch3d;</span><br><span class="line">    <span class="comment">/** 综合图片质量 */</span></span><br><span class="line">    <span class="keyword">float</span> quality  ;</span><br><span class="line">    <span class="keyword">float</span> smooth_quality;</span><br><span class="line">    <span class="keyword">bool</span> face_too_large;</span><br><span class="line">&#125;MGFaceAttr;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  加密水印图片二进制数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MGLivenessDetectionFrameEncodedData</span>: <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>) <span class="built_in">NSData</span>* data;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>) MGFaceAttr attr;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**!</span></span><br><span class="line"><span class="comment"> *  单帧检测结果的类，包含单帧检测出人脸的所有属性，此类无需构造，仅用于回调</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MGLivenessDetectionFrame</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** 检测帧对应图片*/</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>) <span class="built_in">UIImage</span>* image;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 图片中的人脸属性 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>) MGFaceAttr attr;</span><br><span class="line"></span><br><span class="line">-(<span class="built_in">NSComparisonResult</span>) compare: (MGLivenessDetectionFrame*) aFrame;</span><br><span class="line">-(<span class="keyword">id</span>) duplicate;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 根据人脸位置裁剪仅包含人脸的图片 */</span></span><br><span class="line">-(<span class="built_in">UIImage</span>*) croppedImageOfFace;</span><br><span class="line">-(MGLivenessDetectionFrame*) croppedFrameOfFaceWithMaxImageSize: (<span class="keyword">int</span>)maxImageSize;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  获取带水印和加密的图片，如果人脸不存在则返回nil</span></span><br><span class="line"><span class="comment"> *  @param cropping 若为true则根据人脸位置裁剪图片</span></span><br><span class="line"><span class="comment"> *  @param maxSize 压缩最大边长限制</span></span><br><span class="line"><span class="comment"> *  @param compressionQuality JPEG压缩质量，范围[0.0, 1.0]</span></span><br><span class="line"><span class="comment"> *  @param code 水印数字编码</span></span><br><span class="line"><span class="comment"> *  @param watermark 是否需要加水印</span></span><br><span class="line"><span class="comment"> *  @param encrypted 是否进行加密处理</span></span><br><span class="line"><span class="comment"> *  @return 压缩编码后的图片二进制数据以及对应的人脸属性，如果人脸不存在则返回nil</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(MGLivenessDetectionFrameEncodedData*) getImageDataWithCropping: (<span class="keyword">bool</span>)cropping andMaxSize: (<span class="keyword">int</span>)maxSize andJPEGCompressionQuality: (<span class="built_in">CGFloat</span>)compressionQuality andCode: (<span class="keyword">int</span>)code andNeedWatermark:(<span class="keyword">bool</span>)watermark andNeedEncrypted: (<span class="keyword">bool</span>)encrypted;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 根据YAW/PITCH获取转换二维坐标，当人脸不存在时不保证返回值有意义 */</span></span><br><span class="line">+(<span class="built_in">CGPoint</span>) get2DPointWithMinPitch:(<span class="keyword">float</span>)minPitch andMaxPitch:(<span class="keyword">float</span>) maxPitch andMinYaw:(<span class="keyword">float</span>) minYaw</span><br><span class="line">                        andMaxYaw:(<span class="keyword">float</span>) maxYaw andCurPitch:(<span class="keyword">float</span>) curPitch andCurYaw:(<span class="keyword">float</span>) curYaw;</span><br><span class="line">-(<span class="built_in">CGPoint</span>) get2DPointWithMinPitch:(<span class="keyword">float</span>)minPitch andMaxPitch:(<span class="keyword">float</span>) maxPitch andMinYaw:(<span class="keyword">float</span>) minYaw</span><br><span class="line">                        andMaxYaw:(<span class="keyword">float</span>) maxYaw;</span><br><span class="line">-(<span class="built_in">CGPoint</span>) get2DPoint;</span><br><span class="line"><span class="comment">/** 判断二维坐标合法性 */</span></span><br><span class="line">+(<span class="keyword">bool</span>) isValid2DPoint:(<span class="built_in">CGPoint</span>)point;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">FaceIDData</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>) <span class="built_in">NSDictionary</span>* images;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>) <span class="built_in">NSString</span>* delta;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  此接口通过 MGLivenessDetector 的 setDelegate 函数进行注册，在活体检测的过程中会经由不同的事件触发不同的回调方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">MGLivenessProtocolDelegate</span> &lt;<span class="title">NSObject</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@required</span></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  当前活体检测的动作检测失败时，调用此方法。</span></span><br><span class="line"><span class="comment"> *  </span></span><br><span class="line"><span class="comment"> *  @param failedType 动作检测失败的原因（具体选项请参照MGLivenessDetectionFailedType）</span></span><br><span class="line"><span class="comment"> *  @return 无</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(<span class="keyword">void</span>)onDetectionFailed:(MGLivenessDetectionFailedType)failedType;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  当前活体检测的动作检测成功时，调用此方法。</span></span><br><span class="line"><span class="comment"> *  @param validFrame 当前动作中采集的质量最好帧。</span></span><br><span class="line"><span class="comment"> *  @return 下一个需要进行检测的动作的枚举类型（具体选项请参照MGLivenessDetectionType），如果需要结束活体检测流程，则返回类型DETECTION_TYPE_DONE</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(MGLivenessDetectionType)onDetectionSuccess:(MGLivenessDetectionFrame *)validFrame;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  每检测一帧图像，都会调用一次此函数。</span></span><br><span class="line"><span class="comment"> *  @param frame 检测到的人脸的相关信息。</span></span><br><span class="line"><span class="comment"> *  @param timeout 剩余的超时时间</span></span><br><span class="line"><span class="comment"> *  @return 无</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(<span class="keyword">void</span>)onFrameDetected:(MGLivenessDetectionFrame *)frame andTimeout:(<span class="keyword">float</span>) timeout;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  活体检测器类，所有活体动作的检测均由此检测器完成</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MGLivenessDetector</span> : <span class="title">NSObject</span>&lt;<span class="title">LicenseProtocolDelegate</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** 回调接口 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="keyword">id</span> &lt;MGLivenessProtocolDelegate&gt; delegate;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  检测器的构造函数，对于所有检测请求默认使用 DISPATCH_QUEUE_PRIORITY_DEFAULT 队列进行异步调用</span></span><br><span class="line"><span class="comment"> *  </span></span><br><span class="line"><span class="comment"> *  @param options 包含构造检测器的各种配置，具体选项请参照 @link DetectorOptionKeys "检测器配置选项"@endlink</span></span><br><span class="line"><span class="comment"> *  @return 根据配置生成的新检测器，若初始化失败，则返回nil</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+(MGLivenessDetector*) detectorOfOptions: (<span class="built_in">NSDictionary</span>*) options;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  检测器的构造函数</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @param options 包含构造检测器的各种参数，具体选项请参照 @link DetectorOptionKeys "检测器配置选项"@endlink</span></span><br><span class="line"><span class="comment"> *  @param queue 检测请求的异步执行队列</span></span><br><span class="line"><span class="comment"> *  @return 根据配置生成的新检测器，若初始化失败，则返回nil</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+(MGLivenessDetector*) detectorOfOptions: (<span class="built_in">NSDictionary</span>*) options andDispatchQueue: (<span class="built_in">dispatch_queue_t</span>) queue;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  更新检测器参数</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @param options 包含构造检测器的各种参数，具体选项请参照 @link DetectorOptionKeys "检测器配置选项"@endlink</span></span><br><span class="line"><span class="comment"> *  @return 无</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(<span class="keyword">void</span>) setOptions: (<span class="built_in">NSDictionary</span>*) options;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  将视频流获取的原始数据传入检测器进行异步活体检测，检测结果将以异步的形式通知delegate</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @param imgBuffer AVCaptureOutput获取的原始数据流，RGB格式</span></span><br><span class="line"><span class="comment"> *  @param orientation 手机朝向，用于旋转/翻转图像</span></span><br><span class="line"><span class="comment"> *  @return 请求是否成功</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(<span class="keyword">bool</span>) detectWithBuffer: (<span class="built_in">CMSampleBufferRef</span>) imgBuffer orientation:(<span class="built_in">UIImageOrientation</span>) orientation;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  将视频流获取的原始数据传入检测器进行异步活体检测，检测结果将以异步的形式通知delegate</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @param image 待检测图片，不需要事先旋转/翻转，图片的orientation信息将被用于旋转/翻转图像</span></span><br><span class="line"><span class="comment"> *  @return 请求是否成功</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(<span class="keyword">bool</span>) detectWithImage: (<span class="built_in">UIImage</span>*) image;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  强制更改当前的活体检测类型，在调用reset方法后必须调用一次该方法后才会进行活体检测，否则delegate的onDetectionSuccess将不会被触发</span></span><br><span class="line"><span class="comment"> *  </span></span><br><span class="line"><span class="comment"> *  @param detectionType 活体检测类型，具体选项请参照 MGLivenessDetectionType</span></span><br><span class="line"><span class="comment"> *  @return 无</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(<span class="keyword">void</span>) changeDetectionType:(MGLivenessDetectionType)detectionType;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  当活体检测结束后获得过程中间采集的高质量图片样本</span></span><br><span class="line"><span class="comment"> *  </span></span><br><span class="line"><span class="comment"> *  @return 活体检测过程中，每个动作产生一张人脸。其中如果一个动作过程中有质量合格的人脸，则输出质量合格的。否则就输出质量相对最好的一张。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(<span class="built_in">NSArray</span>*) getValidFrame;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-(FaceIDData*) getFaceIDDataWithMaxImageSize: (<span class="keyword">int</span>) maxSize;</span><br><span class="line">-(FaceIDData*) getFaceIDData;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  重置Detector类的状态，当用户需要重新开始活体检测流程时，调用此函数。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @return 无</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(<span class="keyword">void</span>) reset;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  重置当前活体检测状态，仅仅重置当前动作缓存，不会对之前动作的检测记录产生影响。</span></span><br><span class="line"><span class="comment"> *  </span></span><br><span class="line"><span class="comment"> *  @return 无</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(<span class="keyword">void</span>) resetAction;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  获取算法日志（如有需要可调用）</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @return 活体检测算法日志</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(<span class="built_in">NSString</span>*) getAlgorithmLog;</span><br><span class="line">+(<span class="built_in">NSString</span>*) getCachedAlgorithmLog;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  获取版本信息</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @return 版本描述</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+(<span class="built_in">NSString</span>*) getVersion;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!</span></span><br><span class="line"><span class="comment"> *  多张人脸的情况下，设置需检测的人脸所在位置</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @param rect 人脸位置</span></span><br><span class="line"><span class="comment"> *  @return 无</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(<span class="keyword">void</span>) setFaceRect: (<span class="built_in">CGRect</span>) rect;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h2 id="登录类-分享类SDK头文件参考"><a href="#登录类-分享类SDK头文件参考" class="headerlink" title="登录类/分享类SDK头文件参考"></a>登录类/分享类SDK头文件参考</h2><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  WXApi.h</span></span><br><span class="line"><span class="comment">//  所有Api接口</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Wechat on 12-2-28.</span></span><br><span class="line"><span class="comment">//  Copyright (c) 2012年 Tencent. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"WXApiObject.h"</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - WXApiDelegate</span></span><br><span class="line"><span class="comment">/*! @brief 接收并处理来自微信终端程序的事件消息</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 接收并处理来自微信终端程序的事件消息，期间微信界面会切换到第三方应用程序。</span></span><br><span class="line"><span class="comment"> * WXApiDelegate 会在handleOpenURL:delegate:中使用并触发。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">WXApiDelegate</span> &lt;<span class="title">NSObject</span>&gt;</span></span><br><span class="line"><span class="keyword">@optional</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*! @brief 收到一个来自微信的请求，第三方应用程序处理完后调用sendResp向微信发送结果</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 收到一个来自微信的请求，异步处理完成后必须调用sendResp发送处理结果给微信。</span></span><br><span class="line"><span class="comment"> * 可能收到的请求有GetMessageFromWXReq、ShowMessageFromWXReq等。</span></span><br><span class="line"><span class="comment"> * @param req 具体请求内容，是自动释放的</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(<span class="keyword">void</span>) onReq:(BaseReq*)req;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*! @brief 发送一个sendReq后，收到微信的回应</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 收到一个来自微信的处理结果。调用一次sendReq后会收到onResp。</span></span><br><span class="line"><span class="comment"> * 可能收到的处理结果有SendMessageToWXResp、SendAuthResp等。</span></span><br><span class="line"><span class="comment"> * @param resp具体的回应内容，是自动释放的</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">-(<span class="keyword">void</span>) onResp:(BaseResp*)resp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - WXApi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*! @brief 微信Api接口函数类</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 该类封装了微信终端SDK的所有接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">WXApi</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*! @brief WXApi的成员函数，向微信终端程序注册第三方应用。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 需要在每次启动第三方应用程序时调用。第一次调用后，会在微信的可用应用列表中出现。</span></span><br><span class="line"><span class="comment"> * iOS7及以上系统需要调起一次微信才会出现在微信的可用应用列表中。</span></span><br><span class="line"><span class="comment"> * @attention 请保证在主线程中调用此函数</span></span><br><span class="line"><span class="comment"> * @param appid 微信开发者ID</span></span><br><span class="line"><span class="comment"> * @param typeFlag 应用支持打开的文件类型</span></span><br><span class="line"><span class="comment"> * @return 成功返回YES，失败返回NO。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+(<span class="built_in">BOOL</span>) registerApp:(<span class="built_in">NSString</span> *)appid;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*! @brief WXApi的成员函数，向微信终端程序注册第三方应用。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 需要在每次启动第三方应用程序时调用。第一次调用后，会在微信的可用应用列表中出现。</span></span><br><span class="line"><span class="comment"> * @see registerApp</span></span><br><span class="line"><span class="comment"> * @param appid 微信开发者ID</span></span><br><span class="line"><span class="comment"> * @param appdesc 应用附加信息，长度不超过1024字节</span></span><br><span class="line"><span class="comment"> * @return 成功返回YES，失败返回NO。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+(<span class="built_in">BOOL</span>) registerApp:(<span class="built_in">NSString</span> *)appid withDescription:(<span class="built_in">NSString</span> *)appdesc;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*! @brief WXApi的成员函数，向微信终端程序注册应用支持打开的文件类型。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 需要在每次启动第三方应用程序时调用。调用后并第一次成功分享数据到微信后，会在微信的可用应用列表中出现。</span></span><br><span class="line"><span class="comment"> * @see registerApp</span></span><br><span class="line"><span class="comment"> * @param typeFlag 应用支持打开的数据类型, enAppSupportContentFlag枚举类型 “|” 操作后结果</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+(<span class="keyword">void</span>) registerAppSupportContentFlag:(<span class="built_in">UInt64</span>)typeFlag;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*! @brief 处理微信通过URL启动App时传递的数据</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 需要在 application:openURL:sourceApplication:annotation:或者application:handleOpenURL中调用。</span></span><br><span class="line"><span class="comment"> * @param url 微信启动第三方应用时传递过来的URL</span></span><br><span class="line"><span class="comment"> * @param delegate  WXApiDelegate对象，用来接收微信触发的消息。</span></span><br><span class="line"><span class="comment"> * @return 成功返回YES，失败返回NO。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+(<span class="built_in">BOOL</span>) handleOpenURL:(<span class="built_in">NSURL</span> *) url delegate:(<span class="keyword">id</span>&lt;WXApiDelegate&gt;) delegate;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*! @brief 检查微信是否已被用户安装</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @return 微信已安装返回YES，未安装返回NO。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+(<span class="built_in">BOOL</span>) isWXAppInstalled;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*! @brief 判断当前微信的版本是否支持OpenApi</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @return 支持返回YES，不支持返回NO。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+(<span class="built_in">BOOL</span>) isWXAppSupportApi;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*! @brief 获取微信的itunes安装地址</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @return 微信的安装地址字符串。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+(<span class="built_in">NSString</span> *) getWXAppInstallUrl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*! @brief 获取当前微信SDK的版本号</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @return 返回当前微信SDK的版本号</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+(<span class="built_in">NSString</span> *) getApiVersion;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*! @brief 打开微信</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @return 成功返回YES，失败返回NO。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+(<span class="built_in">BOOL</span>) openWXApp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*! @brief 发送请求到微信，等待微信返回onResp</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 函数调用后，会切换到微信的界面。第三方应用程序等待微信返回onResp。微信在异步处理完成后一定会调用onResp。支持以下类型</span></span><br><span class="line"><span class="comment"> * SendAuthReq、SendMessageToWXReq、PayReq等。</span></span><br><span class="line"><span class="comment"> * @param req 具体的发送请求，在调用函数后，请自己释放。</span></span><br><span class="line"><span class="comment"> * @return 成功返回YES，失败返回NO。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+(<span class="built_in">BOOL</span>) sendReq:(BaseReq*)req;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*! @brief 发送Auth请求到微信，支持用户没安装微信，等待微信返回onResp</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 函数调用后，会切换到微信的界面。第三方应用程序等待微信返回onResp。微信在异步处理完成后一定会调用onResp。支持SendAuthReq类型。</span></span><br><span class="line"><span class="comment"> * @param req 具体的发送请求，在调用函数后，请自己释放。</span></span><br><span class="line"><span class="comment"> * @param viewController 当前界面对象。</span></span><br><span class="line"><span class="comment"> * @param delegate  WXApiDelegate对象，用来接收微信触发的消息。</span></span><br><span class="line"><span class="comment"> * @return 成功返回YES，失败返回NO。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+(<span class="built_in">BOOL</span>) sendAuthReq:(SendAuthReq*)req viewController:(<span class="built_in">UIViewController</span>*)viewController delegate:(<span class="keyword">id</span>&lt;WXApiDelegate&gt;)delegate;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*! @brief 收到微信onReq的请求，发送对应的应答给微信，并切换到微信界面</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 函数调用后，会切换到微信的界面。第三方应用程序收到微信onReq的请求，异步处理该请求，完成后必须调用该函数。可能发送的相应有</span></span><br><span class="line"><span class="comment"> * GetMessageFromWXResp、ShowMessageFromWXResp等。</span></span><br><span class="line"><span class="comment"> * @param resp 具体的应答内容，调用函数后，请自己释放</span></span><br><span class="line"><span class="comment"> * @return 成功返回YES，失败返回NO。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+(<span class="built_in">BOOL</span>) sendResp:(BaseResp*)resp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h2 id="地图类SDK头文件参考"><a href="#地图类SDK头文件参考" class="headerlink" title="地图类SDK头文件参考"></a>地图类SDK头文件参考</h2><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  MAMapView.h</span></span><br><span class="line"><span class="comment">//  MAMapKit</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by 翁乐 on 3/17/16.</span></span><br><span class="line"><span class="comment">//  Copyright © 2016 Amap. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">"MAConfig.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;UIKit/UIKit.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"MAOverlay.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"MAOverlayRenderer.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"MAAnnotationView.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"MACircle.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"MAUserLocation.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"MAMapStatus.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"MAIndoorInfo.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"MAUserLocationRepresentation.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">///地图类型</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>, MAMapType)</span><br><span class="line">&#123;</span><br><span class="line">    MAMapTypeStandard = <span class="number">0</span>,  <span class="comment">///&lt; 普通地图</span></span><br><span class="line">    MAMapTypeSatellite,     <span class="comment">///&lt; 卫星地图</span></span><br><span class="line">    MAMapTypeStandardNight, <span class="comment">///&lt; 夜间视图</span></span><br><span class="line">    MAMapTypeNavi,          <span class="comment">///&lt; 导航视图</span></span><br><span class="line">    MAMapTypeBus            <span class="comment">///&lt; 公交视图</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">///用户跟踪模式</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>, MAUserTrackingMode)</span><br><span class="line">&#123;</span><br><span class="line">    MAUserTrackingModeNone              = <span class="number">0</span>,    <span class="comment">///&lt; 不追踪用户的location更新</span></span><br><span class="line">    MAUserTrackingModeFollow            = <span class="number">1</span>,    <span class="comment">///&lt; 追踪用户的location更新</span></span><br><span class="line">    MAUserTrackingModeFollowWithHeading = <span class="number">2</span>     <span class="comment">///&lt; 追踪用户的location与heading更新</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">///交通拥堵状态</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>, MATrafficStatus)</span><br><span class="line">&#123;</span><br><span class="line">    MATrafficStatusSmooth = <span class="number">1</span>,                  <span class="comment">///&lt; 1 通畅</span></span><br><span class="line">    MATrafficStatusSlow,                        <span class="comment">///&lt; 2 缓行</span></span><br><span class="line">    MATrafficStatusJam,                         <span class="comment">///&lt; 3 阻塞</span></span><br><span class="line">    MATrafficStatusSeriousJam,                  <span class="comment">///&lt; 4 严重阻塞</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">///绘制overlay的层级</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>, MAOverlayLevel) &#123;</span><br><span class="line">    MAOverlayLevelAboveRoads = <span class="number">0</span>,   <span class="comment">///&lt; 在地图底图标注和兴趣点图标之下绘制overlay</span></span><br><span class="line">    MAOverlayLevelAboveLabels       <span class="comment">///&lt; 在地图底图标注和兴趣点图标之上绘制overlay</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - 动画相关的key</span></span><br><span class="line"><span class="comment">///中心点(MAMapPoint)key, 封装成[NSValue valueWithMAMapPoint:]</span></span><br><span class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> kMAMapLayerCenterMapPointKey;</span><br><span class="line"></span><br><span class="line"><span class="comment">///缩放级别key, 范围[minZoomLevel, maxZoomLevel], 封装成NSNumber</span></span><br><span class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> kMAMapLayerZoomLevelKey;</span><br><span class="line"></span><br><span class="line"><span class="comment">///旋转角度key, 范围[0, 360), 封装成NSNumber</span></span><br><span class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> kMAMapLayerRotationDegreeKey;</span><br><span class="line"></span><br><span class="line"><span class="comment">///摄像机俯视角度, 范围[0, 45], 封装成NSNumber</span></span><br><span class="line"><span class="keyword">extern</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> kMAMapLayerCameraDegreeKey;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">MAMapViewDelegate</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MAMapView</span> : <span class="title">UIView</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">///地图view的delegate</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">weak</span>) <span class="keyword">id</span>&lt;MAMapViewDelegate&gt; delegate;</span><br><span class="line"></span><br><span class="line"><span class="comment">///地图类型</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) MAMapType mapType;</span><br><span class="line"></span><br><span class="line"><span class="comment">///当前地图的中心点，改变该值时，地图的比例尺级别不会发生变化</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">CLLocationCoordinate2D</span> centerCoordinate;</span><br><span class="line"></span><br><span class="line"><span class="comment">///当前地图的经纬度范围，设定的该范围可能会被调整为适合地图窗口显示的范围</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) MACoordinateRegion region;</span><br><span class="line"></span><br><span class="line"><span class="comment">///可见区域, 设定的该范围可能会被调整为适合地图窗口显示的范围</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) MAMapRect visibleMapRect;</span><br><span class="line"></span><br><span class="line"><span class="comment">///设置可见地图区域的矩形边界，如限制地图只显示北京市范围</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) MACoordinateRegion limitRegion;</span><br><span class="line"></span><br><span class="line"><span class="comment">///设置可见地图区域的矩形边界，如限制地图只显示北京市范围</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) MAMapRect limitMapRect;</span><br><span class="line"></span><br><span class="line"><span class="comment">///缩放级别（默认3-19，有室内地图时为3-20）</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">CGFloat</span> zoomLevel;</span><br><span class="line"></span><br><span class="line"><span class="comment">///最小缩放级别</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">CGFloat</span> minZoomLevel;</span><br><span class="line"></span><br><span class="line"><span class="comment">///最大缩放级别（有室内地图时最大为20，否则为19）</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">CGFloat</span> maxZoomLevel;</span><br><span class="line"></span><br><span class="line"><span class="comment">///设置地图旋转角度(逆时针为正向)</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">CGFloat</span> rotationDegree;</span><br><span class="line"></span><br><span class="line"><span class="comment">///设置地图相机角度(范围为[0.f, 60.f]，但高于40度的角度需要在16级以上才能生效)</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">CGFloat</span> cameraDegree;</span><br><span class="line"></span><br><span class="line"><span class="comment">///是否以screenAnchor点作为锚点进行缩放，默认为YES。如果为NO，则以手势中心点作为锚点</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">BOOL</span> zoomingInPivotsAroundAnchorPoint;</span><br><span class="line"></span><br><span class="line"><span class="comment">///是否支持缩放, 默认YES</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">getter</span> = isZoomEnabled) <span class="built_in">BOOL</span> zoomEnabled;</span><br><span class="line"></span><br><span class="line"><span class="comment">///是否支持平移, 默认YES</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">getter</span> = isScrollEnabled) <span class="built_in">BOOL</span> scrollEnabled;</span><br><span class="line"></span><br><span class="line"><span class="comment">///是否支持旋转, 默认YES</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">getter</span> = isRotateEnabled) <span class="built_in">BOOL</span> rotateEnabled;</span><br><span class="line"></span><br><span class="line"><span class="comment">///是否支持camera旋转, 默认YES</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">getter</span> = isRotateCameraEnabled) <span class="built_in">BOOL</span> rotateCameraEnabled;</span><br><span class="line"></span><br><span class="line"><span class="comment">///是否支持天空模式，默认为YES. 开启后，进入天空模式后，annotation重用可视范围会缩减</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">getter</span> = isSkyModelEnabled) <span class="built_in">BOOL</span> skyModelEnable;</span><br><span class="line"></span><br><span class="line"><span class="comment">///是否显示楼块，默认为YES</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">getter</span> = isShowsBuildings) <span class="built_in">BOOL</span> showsBuildings;</span><br><span class="line"></span><br><span class="line"><span class="comment">///是否显示底图标注, 默认为YES</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>, <span class="keyword">getter</span> = isShowsLabels) <span class="built_in">BOOL</span> showsLabels;</span><br><span class="line"></span><br><span class="line"><span class="comment">///是否显示交通, 默认为NO</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">getter</span> = isShowTraffic) <span class="built_in">BOOL</span> showTraffic;</span><br><span class="line"></span><br><span class="line"><span class="comment">///设置实时交通颜色,key为 MATrafficStatus</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSDictionary</span> &lt;<span class="built_in">NSNumber</span> *, <span class="built_in">UIColor</span> *&gt; *trafficStatus;</span><br><span class="line"></span><br><span class="line"><span class="comment">///是否支持单击地图获取POI信息(默认为YES), 对应的回调是 -(void)mapView:(MAMapView *) didTouchPois:(NSArray *)</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">BOOL</span> touchPOIEnabled;</span><br><span class="line"></span><br><span class="line"><span class="comment">///是否显示指南针, 默认YES</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">BOOL</span> showsCompass;</span><br><span class="line"></span><br><span class="line"><span class="comment">///指南针原点位置</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">CGPoint</span> compassOrigin;</span><br><span class="line"></span><br><span class="line"><span class="comment">///指南针的宽高</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="built_in">CGSize</span> compassSize;</span><br><span class="line"></span><br><span class="line"><span class="comment">///是否显示比例尺, 默认YES</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">BOOL</span> showsScale;</span><br><span class="line"></span><br><span class="line"><span class="comment">///比例尺原点位置</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">CGPoint</span> scaleOrigin;</span><br><span class="line"></span><br><span class="line"><span class="comment">///比例尺的最大宽高</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="built_in">CGSize</span> scaleSize;</span><br><span class="line"></span><br><span class="line"><span class="comment">///logo位置, 必须在mapView.bounds之内，否则会被忽略</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">CGPoint</span> logoCenter;</span><br><span class="line"></span><br><span class="line"><span class="comment">///logo的宽高</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="built_in">CGSize</span> logoSize;</span><br><span class="line"></span><br><span class="line"><span class="comment">///在当前缩放级别下, 基于地图中心点, 1 screen point 对应的距离(单位是米)</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="keyword">double</span> metersPerPointForCurrentZoom;</span><br><span class="line"></span><br><span class="line"><span class="comment">///标识当前地图中心位置是否在中国范围外。此属性不是精确判断，不能用于边界区域</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="built_in">BOOL</span> isAbroad;</span><br><span class="line"></span><br><span class="line"><span class="comment">///最大帧数，有效的帧数为：60、30、20、10等能被60整除的数。默认为60</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">NSUInteger</span> maxRenderFrame;</span><br><span class="line"></span><br><span class="line"><span class="comment">///是否允许降帧，默认为YES</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">BOOL</span> isAllowDecreaseFrame;</span><br><span class="line"></span><br><span class="line"><span class="comment">///停止/开启 OpenGLES绘制, 默认NO. 对应回调是 - (void)mapView:(MAMapView *) didChangeOpenGLESDisabled:(BOOL)</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">BOOL</span> openGLESDisabled;</span><br><span class="line"></span><br><span class="line"><span class="comment">///地图的视图锚点。坐标系归一化，(0, 0)为MAMapView左上角，(1, 1)为右下角。默认为(0.5, 0.5)，即当前地图的视图中心 （since 5.0.0）</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">CGPoint</span> screenAnchor;</span><br><span class="line"></span><br><span class="line"><span class="comment">///地图渲染的runloop mode，默认为NSRunLoopCommonModes。如果是和UIScrollView一起使用且不希望地图在scrollView拖动时渲染，请设置此值为NSDefaultRunLoopMode。（since 5.1.0）</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSRunLoopMode</span> runLoopMode;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设定当前地图的经纬度范围，该范围可能会被调整为适合地图窗口显示的范围</span></span><br><span class="line"><span class="comment"> * @param region 要设定的经纬度范围</span></span><br><span class="line"><span class="comment"> * @param animated 是否动画设置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)setRegion:(MACoordinateRegion)region animated:(<span class="built_in">BOOL</span>)animated;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 根据当前地图视图frame的大小调整region范围</span></span><br><span class="line"><span class="comment"> * @param region 要调整的经纬度范围</span></span><br><span class="line"><span class="comment"> * @return 调整后的经纬度范围</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (MACoordinateRegion)regionThatFits:(MACoordinateRegion)region;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设置可见区域</span></span><br><span class="line"><span class="comment"> * @param mapRect 要设定的可见区域</span></span><br><span class="line"><span class="comment"> * @param animated 是否动画设置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)setVisibleMapRect:(MAMapRect)mapRect animated:(<span class="built_in">BOOL</span>)animated;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 重新计算可见地图矩形区域,使之匹配mapview长宽比</span></span><br><span class="line"><span class="comment"> * @param mapRect 要调整的地图矩形区域</span></span><br><span class="line"><span class="comment"> * @return 调整后的地图矩形区域</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (MAMapRect)mapRectThatFits:(MAMapRect)mapRect;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 根据边缘插入来调整地图矩形区域，使之匹配mapview长宽比</span></span><br><span class="line"><span class="comment"> * @param mapRect 要调整的地图矩形区域</span></span><br><span class="line"><span class="comment"> * @param insets 边缘插入</span></span><br><span class="line"><span class="comment"> * @return 调整后的地图矩形区域</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (MAMapRect)mapRectThatFits:(MAMapRect)mapRect edgePadding:(<span class="built_in">UIEdgeInsets</span>)insets;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设置可见地图矩形区域</span></span><br><span class="line"><span class="comment"> * @param insets 边缘插入</span></span><br><span class="line"><span class="comment"> * @param mapRect 要显示的地图矩形区域</span></span><br><span class="line"><span class="comment"> * @param animated 是否动画效果</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)setVisibleMapRect:(MAMapRect)mapRect edgePadding:(<span class="built_in">UIEdgeInsets</span>)insets animated:(<span class="built_in">BOOL</span>)animated;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设置当前地图的中心点，改变该值时，地图的比例尺级别不会发生变化</span></span><br><span class="line"><span class="comment"> * @param coordinate 要设置的中心点</span></span><br><span class="line"><span class="comment"> * @param animated 是否动画设置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)setCenterCoordinate:(<span class="built_in">CLLocationCoordinate2D</span>)coordinate animated:(<span class="built_in">BOOL</span>)animated;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设置缩放级别（默认3-19，有室内地图时为3-20）</span></span><br><span class="line"><span class="comment"> * @param zoomLevel 要设置的缩放级别</span></span><br><span class="line"><span class="comment"> * @param animated 是否动画设置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)setZoomLevel:(<span class="built_in">CGFloat</span>)zoomLevel animated:(<span class="built_in">BOOL</span>)animated;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 根据指定的枢纽点来缩放地图</span></span><br><span class="line"><span class="comment"> * @param zoomLevel 缩放级别</span></span><br><span class="line"><span class="comment"> * @param pivot 枢纽点(基于地图view的坐标系)</span></span><br><span class="line"><span class="comment"> * @param animated 是否动画</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)setZoomLevel:(<span class="built_in">CGFloat</span>)zoomLevel atPivot:(<span class="built_in">CGPoint</span>)pivot animated:(<span class="built_in">BOOL</span>)animated;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设置地图旋转角度(逆时针为正向)</span></span><br><span class="line"><span class="comment"> * @param rotationDegree 旋转角度</span></span><br><span class="line"><span class="comment"> * @param animated 动画</span></span><br><span class="line"><span class="comment"> * @param duration 动画时间</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)setRotationDegree:(<span class="built_in">CGFloat</span>)rotationDegree animated:(<span class="built_in">BOOL</span>)animated duration:(<span class="built_in">CFTimeInterval</span>)duration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设置地图相机角度(范围为[0.f, 60.f]，但高于40度的角度需要在16级以上才能生效)</span></span><br><span class="line"><span class="comment"> * @param cameraDegree 要设置的相机角度</span></span><br><span class="line"><span class="comment"> * @param animated 是否动画</span></span><br><span class="line"><span class="comment"> * @param duration 动画时间</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)setCameraDegree:(<span class="built_in">CGFloat</span>)cameraDegree animated:(<span class="built_in">BOOL</span>)animated duration:(<span class="built_in">CFTimeInterval</span>)duration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 获取地图状态</span></span><br><span class="line"><span class="comment"> * @return 地图状态</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (MAMapStatus *)getMapStatus;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设置地图状态</span></span><br><span class="line"><span class="comment"> * @param status 要设置的地图状态</span></span><br><span class="line"><span class="comment"> * @param animated 是否动画</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)setMapStatus:(MAMapStatus *)status animated:(<span class="built_in">BOOL</span>)animated;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设置地图状态</span></span><br><span class="line"><span class="comment"> * @param status 要设置的地图状态</span></span><br><span class="line"><span class="comment"> * @param animated 是否动画</span></span><br><span class="line"><span class="comment"> * @param duration 动画时间，默认动画时间为0.35s</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)setMapStatus:(MAMapStatus *)status</span><br><span class="line">            animated:(<span class="built_in">BOOL</span>)animated</span><br><span class="line">            duration:(<span class="built_in">CFTimeInterval</span>)duration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设置指南针的图片</span></span><br><span class="line"><span class="comment"> * @param image 新的指南针图片</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)setCompassImage:(<span class="built_in">UIImage</span> *)image;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在指定区域内截图(默认会包含该区域内的annotationView)</span></span><br><span class="line"><span class="comment"> * @param rect 指定的区域</span></span><br><span class="line"><span class="comment"> * @return 截图image</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="built_in">UIImage</span> *)takeSnapshotInRect:(<span class="built_in">CGRect</span>)rect;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在指定区域内截图(默认会包含该区域内的annotationView),并且返回截屏是否完整</span></span><br><span class="line"><span class="comment"> * @param rect 指定的区域</span></span><br><span class="line"><span class="comment"> * @param block 回调block(resultImage 是返回的图片,state是返回的状态：0代表截图时地图载入不完整，1代表地图载入完整）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)takeSnapshotInRect:(<span class="built_in">CGRect</span>)rect withCompletionBlock:(<span class="keyword">void</span> (^)(<span class="built_in">UIImage</span> *resultImage, <span class="built_in">NSInteger</span> state))block;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在指定的缩放级别下, 基于地图中心点, 1 screen point 对应的距离(单位是米).</span></span><br><span class="line"><span class="comment"> * @param zoomLevel 指定的缩放级别, 在[minZoomLevel, maxZoomLevel]范围内.</span></span><br><span class="line"><span class="comment"> * @return 对应的距离(单位是米)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">double</span>)metersPerPointForZoomLevel:(<span class="built_in">CGFloat</span>)zoomLevel;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 将经纬度转换为指定view坐标系的坐标</span></span><br><span class="line"><span class="comment"> * @param coordinate 经纬度</span></span><br><span class="line"><span class="comment"> * @param view 指定的view</span></span><br><span class="line"><span class="comment"> * @return 基于指定view坐标系的坐标</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="built_in">CGPoint</span>)convertCoordinate:(<span class="built_in">CLLocationCoordinate2D</span>)coordinate toPointToView:(<span class="built_in">UIView</span> *)view;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 将指定view坐标系的坐标转换为经纬度</span></span><br><span class="line"><span class="comment"> * @param point 指定view坐标系的坐标</span></span><br><span class="line"><span class="comment"> * @param view 指定的view</span></span><br><span class="line"><span class="comment"> * @return 经纬度</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="built_in">CLLocationCoordinate2D</span>)convertPoint:(<span class="built_in">CGPoint</span>)point toCoordinateFromView:(<span class="built_in">UIView</span> *)view;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 将经纬度region转换为指定view坐标系的rect</span></span><br><span class="line"><span class="comment"> * @param region 经纬度region</span></span><br><span class="line"><span class="comment"> * @param view 指定的view</span></span><br><span class="line"><span class="comment"> * @return 指定view坐标系的rect</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="built_in">CGRect</span>)convertRegion:(MACoordinateRegion)region toRectToView:(<span class="built_in">UIView</span> *)view;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 将指定view坐标系的rect转换为经纬度region</span></span><br><span class="line"><span class="comment"> * @param rect 指定view坐标系的rect</span></span><br><span class="line"><span class="comment"> * @param view 指定的view</span></span><br><span class="line"><span class="comment"> * @return 经纬度region</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (MACoordinateRegion)convertRect:(<span class="built_in">CGRect</span>)rect toRegionFromView:(<span class="built_in">UIView</span> *)view;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 重新加载地图 </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * 将离线地图解压到 Documents/3dvmap/ 目录下后，调用此函数使离线数据生效,</span></span><br><span class="line"><span class="comment"> * 对应的回调分别是 offlineDataWillReload:(MAMapView *)mapView, offlineDataDidReload:(MAMapView *)mapView.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)reloadMap;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 清除所有磁盘上缓存的地图数据(不包括离线地图)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)clearDisk;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MAMapView</span> (<span class="title">Annotation</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">///所有添加的标注</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="built_in">NSArray</span> *annotations;</span><br><span class="line"></span><br><span class="line"><span class="comment">///处于选中状态的标注数据数据(其count == 0 或 1)</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSArray</span> *selectedAnnotations;</span><br><span class="line"></span><br><span class="line"><span class="comment">///annotation 可见区域</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="built_in">CGRect</span> annotationVisibleRect;</span><br><span class="line"></span><br><span class="line"><span class="comment">///是否允许对annotationView根据zIndex进行排序，默认为NO 注意：如果设置为YES，慎重重载MAAnnoationView的willMoveToSuperview:，内部排序时会调用removeFromSuperView</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">BOOL</span> allowsAnnotationViewSorting;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 向地图窗口添加标注，需要实现MAMapViewDelegate的-mapView:viewForAnnotation:函数来生成标注对应的View</span></span><br><span class="line"><span class="comment"> * @param annotation 要添加的标注</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)addAnnotation:(<span class="keyword">id</span> &lt;MAAnnotation&gt;)annotation;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 向地图窗口添加一组标注，需要实现MAMapViewDelegate的-mapView:viewForAnnotation:函数来生成标注对应的View</span></span><br><span class="line"><span class="comment"> * @param annotations 要添加的标注数组</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)addAnnotations:(<span class="built_in">NSArray</span> *)annotations;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 移除标注</span></span><br><span class="line"><span class="comment"> * @param annotation 要移除的标注</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)removeAnnotation:(<span class="keyword">id</span> &lt;MAAnnotation&gt;)annotation;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 移除一组标注</span></span><br><span class="line"><span class="comment"> * @param annotations 要移除的标注数组</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)removeAnnotations:(<span class="built_in">NSArray</span> *)annotations;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 获取指定投影矩形范围内的标注</span></span><br><span class="line"><span class="comment"> * @param mapRect 投影矩形范围</span></span><br><span class="line"><span class="comment"> * @return 标注集合</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="built_in">NSSet</span> *)annotationsInMapRect:(MAMapRect)mapRect;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 根据标注数据过去标注view</span></span><br><span class="line"><span class="comment"> * @param annotation 标注数据</span></span><br><span class="line"><span class="comment"> * @return 对应的标注view</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (MAAnnotationView *)viewForAnnotation:(<span class="keyword">id</span> &lt;MAAnnotation&gt;)annotation;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 从复用内存池中获取制定复用标识的annotation view</span></span><br><span class="line"><span class="comment"> * @param identifier 复用标识</span></span><br><span class="line"><span class="comment"> * @return annotation view</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (MAAnnotationView *)dequeueReusableAnnotationViewWithIdentifier:(<span class="built_in">NSString</span> *)identifier;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 选中标注数据对应的view</span></span><br><span class="line"><span class="comment"> * @param annotation 标注数据</span></span><br><span class="line"><span class="comment"> * @param animated 是否有动画效果</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)selectAnnotation:(<span class="keyword">id</span> &lt;MAAnnotation&gt;)annotation animated:(<span class="built_in">BOOL</span>)animated;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 取消选中标注数据对应的view</span></span><br><span class="line"><span class="comment"> * @param annotation 标注数据</span></span><br><span class="line"><span class="comment"> * @param animated 是否有动画效果</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)deselectAnnotation:(<span class="keyword">id</span> &lt;MAAnnotation&gt;)annotation animated:(<span class="built_in">BOOL</span>)animated;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设置地图使其可以显示数组中所有的annotation, 如果数组中只有一个则直接设置地图中心为annotation的位置。</span></span><br><span class="line"><span class="comment"> * @param annotations 需要显示的annotation</span></span><br><span class="line"><span class="comment"> * @param animated    是否执行动画</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)showAnnotations:(<span class="built_in">NSArray</span> *)annotations animated:(<span class="built_in">BOOL</span>)animated;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设置地图使其可以显示数组中所有的annotation, 如果数组中只有一个则直接设置地图中心为annotation的位置。</span></span><br><span class="line"><span class="comment"> * @param annotations 需要显示的annotation</span></span><br><span class="line"><span class="comment"> * @param insets      insets 嵌入边界</span></span><br><span class="line"><span class="comment"> * @param animated    是否执行动画</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)showAnnotations:(<span class="built_in">NSArray</span> *)annotations edgePadding:(<span class="built_in">UIEdgeInsets</span>)insets animated:(<span class="built_in">BOOL</span>)animated;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MAMapView</span> (<span class="title">UserLocation</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">///是否显示用户位置</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">BOOL</span> showsUserLocation;</span><br><span class="line"></span><br><span class="line"><span class="comment">///当前的位置数据</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) MAUserLocation *userLocation;</span><br><span class="line"></span><br><span class="line"><span class="comment">///是否自定义用户位置精度圈(userLocationAccuracyCircle)对应的 view, 默认为 NO.\n 如果为YES: 会调用 - (MAOverlayRenderer *)mapView (MAMapView *)mapView rendererForOverlay:(id &lt;MAOverlay&gt;)overlay 若返回nil, 则不加载.\n 如果为NO : 会使用默认的样式.</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">BOOL</span> customizeUserLocationAccuracyCircleRepresentation;</span><br><span class="line"></span><br><span class="line"><span class="comment">///用户位置精度圈 对应的overlay</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) MACircle *userLocationAccuracyCircle;</span><br><span class="line"></span><br><span class="line"><span class="comment">///定位用户位置的模式</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) MAUserTrackingMode userTrackingMode;</span><br><span class="line"></span><br><span class="line"><span class="comment">///当前位置再地图中是否可见</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">getter</span>=isUserLocationVisible) <span class="built_in">BOOL</span> userLocationVisible;</span><br><span class="line"></span><br><span class="line"><span class="comment">///设定定位的最小更新距离。默认为kCLDistanceFilterNone，会提示任何移动</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">CLLocationDistance</span> distanceFilter;</span><br><span class="line"></span><br><span class="line"><span class="comment">///设定定位精度。默认为kCLLocationAccuracyBest</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">CLLocationAccuracy</span> desiredAccuracy;</span><br><span class="line"></span><br><span class="line"><span class="comment">///设定最小更新角度。默认为1度，设定为kCLHeadingFilterNone会提示任何角度改变</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">CLLocationDegrees</span> headingFilter;</span><br><span class="line"></span><br><span class="line"><span class="comment">///指定定位是否会被系统自动暂停</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">BOOL</span> pausesLocationUpdatesAutomatically;</span><br><span class="line"></span><br><span class="line"><span class="comment">///是否允许后台定位。默认为NO。只在iOS 9.0之后起作用。\n 设置为YES的时候必须保证 Background Modes 中的 Location updates处于选中状态，否则会抛出异常。\n 注意：定位必须在停止的状态下设置（showsUserLocation = NO），否则无效</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">BOOL</span> allowsBackgroundLocationUpdates;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设置定位用户位置的模式</span></span><br><span class="line"><span class="comment"> * @param mode 要设置的模式</span></span><br><span class="line"><span class="comment"> * @param animated 是否动画设置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)setUserTrackingMode:(MAUserTrackingMode)mode animated:(<span class="built_in">BOOL</span>)animated;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设定UserLocationView样式。如果用户自定义了userlocation的annotationView，或者该annotationView还未添加到地图上，此方法将不起作用</span></span><br><span class="line"><span class="comment"> * @param representation 样式信息对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)updateUserLocationRepresentation:(MAUserLocationRepresentation *)representation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MAMapView</span> (<span class="title">Overlay</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">///所有添加的Overlay</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="built_in">NSArray</span> *overlays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 取位于level下的overlays</span></span><br><span class="line"><span class="comment"> * @param level 层级</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="built_in">NSArray</span> *)overlaysInLevel:(MAOverlayLevel)level;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 向地图窗口添加Overlay。</span></span><br><span class="line"><span class="comment"> * 需要实现MAMapViewDelegate的-mapView:rendererForOverlay:函数来生成标注对应的Renderer。</span></span><br><span class="line"><span class="comment"> * 默认添加层级：MAGroundOverlay默认层级为MAOverlayLevelAboveRoads，其余overlay类型默认层级为MAOverlayLevelAboveLabels</span></span><br><span class="line"><span class="comment"> * @param overlay 要添加的overlay</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)addOverlay:(<span class="keyword">id</span> &lt;MAOverlay&gt;)overlay;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 向地图窗口添加一组Overlay，需要实现MAMapViewDelegate的-mapView:rendererForOverlay:函数来生成标注对应的Renderer</span></span><br><span class="line"><span class="comment"> * 默认添加层级：MAOverlayLevelAboveLabels</span></span><br><span class="line"><span class="comment"> * @param overlays 要添加的overlay数组</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)addOverlays:(<span class="built_in">NSArray</span> *)overlays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 向地图窗口添加Overlay，需要实现MAMapViewDelegate的-mapView:rendererForOverlay:函数来生成标注对应的Renderer</span></span><br><span class="line"><span class="comment"> * @param overlay 要添加的overlay</span></span><br><span class="line"><span class="comment"> * @param level 添加的overlay所在层级</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)addOverlay:(<span class="keyword">id</span> &lt;MAOverlay&gt;)overlay level:(MAOverlayLevel)level;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 向地图窗口添加一组Overlay，需要实现MAMapViewDelegate的-mapView:rendererForOverlay:函数来生成标注对应的Renderer</span></span><br><span class="line"><span class="comment"> * @param overlays 要添加的overlay数组</span></span><br><span class="line"><span class="comment"> * @param level 添加的overlay所在层级</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)addOverlays:(<span class="built_in">NSArray</span> *)overlays level:(MAOverlayLevel)level;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 移除Overlay</span></span><br><span class="line"><span class="comment"> * @param overlay 要移除的overlay</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)removeOverlay:(<span class="keyword">id</span> &lt;MAOverlay&gt;)overlay;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 移除一组Overlay</span></span><br><span class="line"><span class="comment"> * @param overlays 要移除的overlay数组</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)removeOverlays:(<span class="built_in">NSArray</span> *)overlays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在指定层级的指定的索引处添加一个Overlay</span></span><br><span class="line"><span class="comment"> * @param overlay 要添加的overlay</span></span><br><span class="line"><span class="comment"> * @param index 指定的索引</span></span><br><span class="line"><span class="comment"> * @param level 指定的层级</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> * 注：各个层级的索引分开计数；</span></span><br><span class="line"><span class="comment"> * 若index大于level层级的最大索引，则添加至level层级的最大索引之后。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)insertOverlay:(<span class="keyword">id</span> &lt;MAOverlay&gt;)overlay atIndex:(<span class="built_in">NSUInteger</span>)index level:(MAOverlayLevel)level;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在指定的Overlay之上插入一个overlay</span></span><br><span class="line"><span class="comment"> * @param overlay 带添加的Overlay</span></span><br><span class="line"><span class="comment"> * @param sibling 用于指定相对位置的Overlay</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)insertOverlay:(<span class="keyword">id</span> &lt;MAOverlay&gt;)overlay aboveOverlay:(<span class="keyword">id</span> &lt;MAOverlay&gt;)sibling;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在指定的Overlay之下插入一个overlay</span></span><br><span class="line"><span class="comment"> * @param overlay 带添加的Overlay</span></span><br><span class="line"><span class="comment"> * @param sibling 用于指定相对位置的Overlay</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)insertOverlay:(<span class="keyword">id</span> &lt;MAOverlay&gt;)overlay belowOverlay:(<span class="keyword">id</span> &lt;MAOverlay&gt;)sibling;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在指定的索引处添加一个Overlay</span></span><br><span class="line"><span class="comment"> * @param overlay 要添加的overlay</span></span><br><span class="line"><span class="comment"> * @param index 指定的索引</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)insertOverlay:(<span class="keyword">id</span> &lt;MAOverlay&gt;)overlay atIndex:(<span class="built_in">NSUInteger</span>)index;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在MAOverlayLevelAboveLabels上交换指定索引处的Overlay</span></span><br><span class="line"><span class="comment"> * @param index1 索引1</span></span><br><span class="line"><span class="comment"> * @param index2 索引2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)exchangeOverlayAtIndex:(<span class="built_in">NSUInteger</span>)index1 withOverlayAtIndex:(<span class="built_in">NSUInteger</span>)index2;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 交换指定索引处的Overlay</span></span><br><span class="line"><span class="comment"> * @param index1 索引1</span></span><br><span class="line"><span class="comment"> * @param index2 索引2</span></span><br><span class="line"><span class="comment"> * @param level 所处层级</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)exchangeOverlayAtIndex:(<span class="built_in">NSUInteger</span>)index1 withOverlayAtIndex:(<span class="built_in">NSUInteger</span>)index2 atLevel:(MAOverlayLevel)level;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 交换两个overlay</span></span><br><span class="line"><span class="comment"> * @param overlay1 overlay1</span></span><br><span class="line"><span class="comment"> * @param overlay2 overlay2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)exchangeOverlay:(<span class="keyword">id</span> &lt;MAOverlay&gt;)overlay1 withOverlay:(<span class="keyword">id</span> &lt;MAOverlay&gt;)overlay2;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 查找指定overlay对应的Renderer，如果该View尚未创建，返回nil</span></span><br><span class="line"><span class="comment"> * @param overlay 指定的overlay</span></span><br><span class="line"><span class="comment"> * @return 指定overlay对应的Renderer</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (MAOverlayRenderer *)rendererForOverlay:(<span class="keyword">id</span> &lt;MAOverlay&gt;)overlay;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设置地图使其可以显示数组中所有的overlay, 如果数组中只有一个则直接设置地图中心为overlay的位置。</span></span><br><span class="line"><span class="comment"> * @param overlays    需要显示的overlays</span></span><br><span class="line"><span class="comment"> * @param animated    是否执行动画</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)showOverlays:(<span class="built_in">NSArray</span> *)overlays animated:(<span class="built_in">BOOL</span>)animated;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设置地图使其可以显示数组中所有的overlay, 如果数组中只有一个则直接设置地图中心为overlay的位置。</span></span><br><span class="line"><span class="comment"> * @param overlays    需要显示的overlays</span></span><br><span class="line"><span class="comment"> * @param insets      insets 嵌入边界</span></span><br><span class="line"><span class="comment"> * @param animated    是否执行动画</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)showOverlays:(<span class="built_in">NSArray</span> *)overlays edgePadding:(<span class="built_in">UIEdgeInsets</span>)insets animated:(<span class="built_in">BOOL</span>)animated;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#if MA_INCLUDE_INDOOR</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MAMapView</span> (<span class="title">Indoor</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">///是否显示室内地图, 默认NO</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">getter</span> = isShowsIndoorMap) <span class="built_in">BOOL</span> showsIndoorMap;</span><br><span class="line"></span><br><span class="line"><span class="comment">///是否显示室内地图默认控件, 默认YES</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">getter</span> = isShowsIndoorMapControl) <span class="built_in">BOOL</span> showsIndoorMapControl;</span><br><span class="line"></span><br><span class="line"><span class="comment">///默认室内地图控件的最大宽高</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="built_in">CGSize</span> indoorMapControlSize;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设置默认室内地图控件位置</span></span><br><span class="line"><span class="comment"> * @param origin 左上角点位置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)setIndoorMapControlOrigin:(<span class="built_in">CGPoint</span>)origin;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 设置当前室内地图楼层数</span></span><br><span class="line"><span class="comment"> * @param floorIndex 要设置的楼层数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)setCurrentIndoorMapFloorIndex:(<span class="built_in">NSInteger</span>)floorIndex;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 清空室内地图缓存</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)clearIndoorMapCache;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="comment">///自定义样式</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MAMapView</span> (<span class="title">CustomMapStyle</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">///是否开启自定义样式, 默认NO. since 5.0.0</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">BOOL</span> customMapStyleEnabled;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 自定义地图样式, 目前仅支持自定义标准类型. 默认不生效，调用customMapStyleEnabled=YES使生效.</span></span><br><span class="line"><span class="comment"> * @param customJson 自定义的JSON格式数据.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)setCustomMapStyle:(<span class="built_in">NSData</span>*)customJson;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 根据web导出数据设置地图样式, 目前仅支持自定义标准类型. 默认不生效，调用customMapStyleEnabled=YES使生效. since 5.2.0</span></span><br><span class="line"><span class="comment"> * @param data 高德web端工具导出的地图样式数据.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)setCustomMapStyleWithWebData:(<span class="built_in">NSData</span>*)data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - MAMapViewDelegate</span></span><br><span class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">MAMapViewDelegate</span> &lt;<span class="title">NSObject</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@optional</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 地图区域改变过程中会调用此接口 since 4.6.0</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapViewRegionChanged:(MAMapView *)mapView;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 地图区域即将改变时会调用此接口</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> * @param animated 是否动画</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView regionWillChangeAnimated:(<span class="built_in">BOOL</span>)animated;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 地图区域改变完成后会调用此接口</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> * @param animated 是否动画</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView regionDidChangeAnimated:(<span class="built_in">BOOL</span>)animated;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 地图将要发生移动时调用此接口</span></span><br><span class="line"><span class="comment"> * @param mapView       地图view</span></span><br><span class="line"><span class="comment"> * @param wasUserAction 标识是否是用户动作</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView mapWillMoveByUser:(<span class="built_in">BOOL</span>)wasUserAction;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 地图移动结束后调用此接口</span></span><br><span class="line"><span class="comment"> * @param mapView       地图view</span></span><br><span class="line"><span class="comment"> * @param wasUserAction 标识是否是用户动作</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView mapDidMoveByUser:(<span class="built_in">BOOL</span>)wasUserAction;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 地图将要发生缩放时调用此接口</span></span><br><span class="line"><span class="comment"> * @param mapView       地图view</span></span><br><span class="line"><span class="comment"> * @param wasUserAction 标识是否是用户动作</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView mapWillZoomByUser:(<span class="built_in">BOOL</span>)wasUserAction;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 地图缩放结束后调用此接口</span></span><br><span class="line"><span class="comment"> * @param mapView       地图view</span></span><br><span class="line"><span class="comment"> * @param wasUserAction 标识是否是用户动作</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView mapDidZoomByUser:(<span class="built_in">BOOL</span>)wasUserAction;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 地图开始加载</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapViewWillStartLoadingMap:(MAMapView *)mapView;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 地图加载成功</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapViewDidFinishLoadingMap:(MAMapView *)mapView;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 地图加载失败</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> * @param error 错误信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapViewDidFailLoadingMap:(MAMapView *)mapView withError:(<span class="built_in">NSError</span> *)error;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 根据anntation生成对应的View</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> * @param annotation 指定的标注</span></span><br><span class="line"><span class="comment"> * @return 生成的标注View</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (MAAnnotationView *)mapView:(MAMapView *)mapView viewForAnnotation:(<span class="keyword">id</span> &lt;MAAnnotation&gt;)annotation;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 当mapView新添加annotation views时，调用此接口</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> * @param views 新添加的annotation views</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView didAddAnnotationViews:(<span class="built_in">NSArray</span> *)views;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 当选中一个annotation view时，调用此接口. 注意如果已经是选中状态，再次点击不会触发此回调。取消选中需调用-(void)deselectAnnotation:animated:</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> * @param view 选中的annotation view</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView didSelectAnnotationView:(MAAnnotationView *)view;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 当取消选中一个annotation view时，调用此接口</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> * @param view 取消选中的annotation view</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView didDeselectAnnotationView:(MAAnnotationView *)view;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在地图View将要启动定位时，会调用此函数</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapViewWillStartLocatingUser:(MAMapView *)mapView;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 在地图View停止定位后，会调用此函数</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapViewDidStopLocatingUser:(MAMapView *)mapView;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 位置或者设备方向更新后，会调用此函数</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> * @param userLocation 用户定位信息(包括位置与设备方向等数据)</span></span><br><span class="line"><span class="comment"> * @param updatingLocation 标示是否是location数据更新, YES:location数据更新 NO:heading数据更新</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView didUpdateUserLocation:(MAUserLocation *)userLocation updatingLocation:(<span class="built_in">BOOL</span>)updatingLocation;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 定位失败后，会调用此函数</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> * @param error 错误号，参考CLError.h中定义的错误号</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView didFailToLocateUserWithError:(<span class="built_in">NSError</span> *)error;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 拖动annotation view时view的状态变化</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> * @param view annotation view</span></span><br><span class="line"><span class="comment"> * @param newState 新状态</span></span><br><span class="line"><span class="comment"> * @param oldState 旧状态</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView annotationView:(MAAnnotationView *)view didChangeDragState:(MAAnnotationViewDragState)newState</span><br><span class="line">   fromOldState:(MAAnnotationViewDragState)oldState;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 根据overlay生成对应的Renderer</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> * @param overlay 指定的overlay</span></span><br><span class="line"><span class="comment"> * @return 生成的覆盖物Renderer</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (MAOverlayRenderer *)mapView:(MAMapView *)mapView rendererForOverlay:(<span class="keyword">id</span> &lt;MAOverlay&gt;)overlay;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 当mapView新添加overlay renderers时，调用此接口</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> * @param overlayRenderers 新添加的overlay renderers</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView didAddOverlayRenderers:(<span class="built_in">NSArray</span> *)overlayRenderers;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 标注view的accessory view(必须继承自UIControl)被点击时，触发该回调</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> * @param view callout所属的标注view</span></span><br><span class="line"><span class="comment"> * @param control 对应的control</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView annotationView:(MAAnnotationView *)view calloutAccessoryControlTapped:(<span class="built_in">UIControl</span> *)control;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 标注view的calloutview整体点击时，触发改回调。</span></span><br><span class="line"><span class="comment"> * @param mapView 地图的view</span></span><br><span class="line"><span class="comment"> * @param view calloutView所属的annotationView</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView didAnnotationViewCalloutTapped:(MAAnnotationView *)view;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 当userTrackingMode改变时，调用此接口</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> * @param mode 改变后的mode</span></span><br><span class="line"><span class="comment"> * @param animated 动画</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView didChangeUserTrackingMode:(MAUserTrackingMode)mode animated:(<span class="built_in">BOOL</span>)animated;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 当openGLESDisabled变量改变时，调用此接口</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> * @param openGLESDisabled 改变后的openGLESDisabled</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView didChangeOpenGLESDisabled:(<span class="built_in">BOOL</span>)openGLESDisabled;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 当touchPOIEnabled == YES时，单击地图使用该回调获取POI信息</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> * @param pois 获取到的poi数组(由MATouchPoi组成)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView didTouchPois:(<span class="built_in">NSArray</span> *)pois;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 单击地图回调，返回经纬度</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> * @param coordinate 经纬度</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView didSingleTappedAtCoordinate:(<span class="built_in">CLLocationCoordinate2D</span>)coordinate;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 长按地图，返回经纬度</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> * @param coordinate 经纬度</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView didLongPressedAtCoordinate:(<span class="built_in">CLLocationCoordinate2D</span>)coordinate;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 地图初始化完成（在此之后，可以进行坐标计算）</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapInitComplete:(MAMapView *)mapView;</span><br><span class="line"></span><br><span class="line"><span class="meta">#if MA_INCLUDE_INDOOR</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief  室内地图出现,返回室内地图信息</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @param mapView        地图View</span></span><br><span class="line"><span class="comment"> *  @param indoorInfo     室内地图信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView didIndoorMapShowed:(MAIndoorInfo *)indoorInfo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief  室内地图楼层发生变化,返回变化的楼层</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @param mapView        地图View</span></span><br><span class="line"><span class="comment"> *  @param indoorInfo     变化的楼层</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView didIndoorMapFloorIndexChanged:(MAIndoorInfo *)indoorInfo;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief  室内地图消失后,返回室内地图信息</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @param mapView        地图View</span></span><br><span class="line"><span class="comment"> *  @param indoorInfo     室内地图信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)mapView:(MAMapView *)mapView didIndoorMapHidden:(MAIndoorInfo *)indoorInfo;</span><br><span class="line"><span class="meta">#endif //end of MA_INCLUDE_INDOOR</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 离线地图数据将要被加载, 调用reloadMap会触发该回调，离线数据生效前的回调.</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)offlineDataWillReload:(MAMapView *)mapView;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @brief 离线地图数据加载完成, 调用reloadMap会触发该回调，离线数据生效后的回调.</span></span><br><span class="line"><span class="comment"> * @param mapView 地图View</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)offlineDataDidReload:(MAMapView *)mapView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h2 id="Google统计SDK头文件参考"><a href="#Google统计SDK头文件参考" class="headerlink" title="Google统计SDK头文件参考"></a>Google统计SDK头文件参考</h2><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Copyright 2017 Google</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Licensed under the Apache License, Version 2.0 (the "License");</span></span><br><span class="line"><span class="comment"> * you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment"> * You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *      http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment"> * distributed under the License is distributed on an "AS IS" BASIS,</span></span><br><span class="line"><span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment"> * See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment"> * limitations under the License.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#if TARGET_OS_IOS</span></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> Remove UIKit import on next breaking change release</span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;UIKit/UIKit.h&gt;</span></span></span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@class</span> <span class="title">FIROptions</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">NS_ASSUME_NONNULL_BEGIN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** A block that takes a BOOL and has no return value. */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">void</span> (^FIRAppVoidBoolCallback)(<span class="built_in">BOOL</span> success) <span class="built_in">NS_SWIFT_NAME</span>(FirebaseAppVoidBoolCallback);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The entry point of Firebase SDKs.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Initialize and configure FIRApp using +[FIRApp configure]</span></span><br><span class="line"><span class="comment"> * or other customized ways as shown below.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * The logging system has two modes: default mode and debug mode. In default mode, only logs with</span></span><br><span class="line"><span class="comment"> * log level Notice, Warning and Error will be sent to device. In debug mode, all logs will be sent</span></span><br><span class="line"><span class="comment"> * to device. The log levels that Firebase uses are consistent with the ASL log levels.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Enable debug mode by passing the -FIRDebugEnabled argument to the application. You can add this</span></span><br><span class="line"><span class="comment"> * argument in the application's Xcode scheme. When debug mode is enabled via -FIRDebugEnabled,</span></span><br><span class="line"><span class="comment"> * further executions of the application will also be in debug mode. In order to return to default</span></span><br><span class="line"><span class="comment"> * mode, you must explicitly disable the debug mode with the application argument -FIRDebugDisabled.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * It is also possible to change the default logging level in code by calling setLoggerLevel: on</span></span><br><span class="line"><span class="comment"> * the FIRConfiguration interface.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">NS_SWIFT_NAME</span>(FirebaseApp)</span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">FIRApp</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Configures a default Firebase app. Raises an exception if any configuration step fails. The</span></span><br><span class="line"><span class="comment"> * default app is named "__FIRAPP_DEFAULT". This method should be called after the app is launched</span></span><br><span class="line"><span class="comment"> * and before using Firebase services. This method is thread safe.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+ (<span class="keyword">void</span>)configure;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Configures the default Firebase app with the provided options. The default app is named</span></span><br><span class="line"><span class="comment"> * "__FIRAPP_DEFAULT". Raises an exception if any configuration step fails. This method is thread</span></span><br><span class="line"><span class="comment"> * safe.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param options The Firebase application options used to configure the service.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+ (<span class="keyword">void</span>)configureWithOptions:(FIROptions *)options <span class="built_in">NS_SWIFT_NAME</span>(configure(options:));</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Configures a Firebase app with the given name and options. Raises an exception if any</span></span><br><span class="line"><span class="comment"> * configuration step fails. This method is thread safe.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param name The application's name given by the developer. The name should should only contain</span></span><br><span class="line"><span class="comment">               Letters, Numbers and Underscore.</span></span><br><span class="line"><span class="comment"> * @param options The Firebase application options used to configure the services.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// clang-format off</span></span><br><span class="line">+ (<span class="keyword">void</span>)configureWithName:(<span class="built_in">NSString</span> *)name</span><br><span class="line">                  options:(FIROptions *)options <span class="built_in">NS_SWIFT_NAME</span>(configure(name:options:));</span><br><span class="line"><span class="comment">// clang-format on</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Returns the default app, or nil if the default app does not exist.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+ (<span class="keyword">nullable</span> FIRApp *)defaultApp <span class="built_in">NS_SWIFT_NAME</span>(app());</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Returns a previously created FIRApp instance with the given name, or nil if no such app exists.</span></span><br><span class="line"><span class="comment"> * This method is thread safe.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+ (<span class="keyword">nullable</span> FIRApp *)appNamed:(<span class="built_in">NSString</span> *)name <span class="built_in">NS_SWIFT_NAME</span>(app(name:));</span><br><span class="line"></span><br><span class="line"><span class="meta">#if defined(__IPHONE_10_0) &amp;&amp; __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= __IPHONE_10_0</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Returns the set of all extant FIRApp instances, or nil if there are no FIRApp instances. This</span></span><br><span class="line"><span class="comment"> * method is thread safe.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">class</span>, <span class="keyword">readonly</span>, <span class="keyword">nullable</span>) <span class="built_in">NSDictionary</span>&lt;<span class="built_in">NSString</span> *, FIRApp *&gt; *allApps;</span><br><span class="line"><span class="meta">#else</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Returns the set of all extant FIRApp instances, or nil if there are no FIRApp instances. This</span></span><br><span class="line"><span class="comment"> * method is thread safe.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+ (<span class="keyword">nullable</span> <span class="built_in">NSDictionary</span>&lt;<span class="built_in">NSString</span> *, FIRApp *&gt; *)allApps <span class="built_in">NS_SWIFT_NAME</span>(allApps());</span><br><span class="line"><span class="meta">#endif  // defined(__IPHONE_10_0) &amp;&amp; __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= __IPHONE_10_0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Cleans up the current FIRApp, freeing associated data and returning its name to the pool for</span></span><br><span class="line"><span class="comment"> * future use. This method is thread safe.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)deleteApp:(FIRAppVoidBoolCallback)completion;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * FIRApp instances should not be initialized directly. Call +[FIRApp configure],</span></span><br><span class="line"><span class="comment"> * +[FIRApp configureWithOptions:], or +[FIRApp configureWithNames:options:] directly.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">instancetype</span>)init <span class="built_in">NS_UNAVAILABLE</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Gets the name of this app.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) <span class="built_in">NSString</span> *name;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Gets a copy of the options for this app. These are non-modifiable.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>, <span class="keyword">readonly</span>) FIROptions *options;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">NS_ASSUME_NONNULL_END</span></span><br></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/05/18/开源许可证/" rel="next" title="开源等于免费？">
                <i class="fa fa-chevron-left"></i> 开源等于免费？
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/05/18/iOS 沙盒路径/" rel="prev" title="iOS 沙盒路径">
                iOS 沙盒路径 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">wingci</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#基本概念"><span class="nav-number">1.</span> <span class="nav-text">基本概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#iOS8之后的变动"><span class="nav-number">2.</span> <span class="nav-text">iOS8之后的变动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#常见问题"><span class="nav-number">3.</span> <span class="nav-text">常见问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#具体实现流程"><span class="nav-number">4.</span> <span class="nav-text">具体实现流程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#业务场景"><span class="nav-number">5.</span> <span class="nav-text">业务场景</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#支付类SDK头文件参考"><span class="nav-number">6.</span> <span class="nav-text">支付类SDK头文件参考</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#人脸识别SDK头文件参考"><span class="nav-number">7.</span> <span class="nav-text">人脸识别SDK头文件参考</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#登录类-分享类SDK头文件参考"><span class="nav-number">8.</span> <span class="nav-text">登录类/分享类SDK头文件参考</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#地图类SDK头文件参考"><span class="nav-number">9.</span> <span class="nav-text">地图类SDK头文件参考</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Google统计SDK头文件参考"><span class="nav-number">10.</span> <span class="nav-text">Google统计SDK头文件参考</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wingci</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
